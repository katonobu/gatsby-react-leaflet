"use strict";(self.webpackChunkgatsby_starter_hello_world=self.webpackChunkgatsby_starter_hello_world||[]).push([[678],{750:function(e,n,t){t.r(n),t.d(n,{default:function(){return Y}});var r=t(294);function o(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},u=Object.keys(e);for(r=0;r<u.length;r++)t=u[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(r=0;r<u.length;r++)t=u[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var u=t(181);function c(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,u=[],c=!0,a=!1;try{for(t=t.call(e);!(c=(r=t.next()).done)&&(u.push(r.value),!n||u.length!==n);c=!0);}catch(l){a=!0,o=l}finally{try{c||null==t.return||t.return()}finally{if(a)throw o}}return u}}(e,n)||(0,u.Z)(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a=(0,r.createContext)(null),l=a.Provider;function i(){var e=(0,r.useContext)(a);if(null==e)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var s=t(678),f=["children","className","id","placeholder","style","whenCreated"];function p(){return p=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},p.apply(this,arguments)}function d(e){var n=e.children,t=e.className,u=e.id,a=e.placeholder,i=e.style,d=e.whenCreated,y=o(e,f),v=(0,r.useRef)(null),b=function(e,n){var t=c((0,r.useState)(null),2),o=t[0],u=t[1];return(0,r.useEffect)((function(){if(null!==e.current&&null===o){var t=new s.Map(e.current,n);null!=n.center&&null!=n.zoom?t.setView(n.center,n.zoom):null!=n.bounds&&t.fitBounds(n.bounds,n.boundsOptions),null!=n.whenReady&&t.whenReady(n.whenReady),u(t)}}),[e,o,n]),o}(v,y),m=(0,r.useRef)(!1);(0,r.useEffect)((function(){null!=b&&!1===m.current&&null!=d&&(m.current=!0,d(b))}),[b,d]);var g=c((0,r.useState)({className:t,id:u,style:i}),1)[0],O=(0,r.useMemo)((function(){return b?{__version:1,map:b}:null}),[b]),h=O?r.createElement(l,{value:O},n):null!=a?a:null;return r.createElement("div",p({},g,{ref:v}),h)}function y(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function v(e,n){return null==n?function(n,t){return(0,r.useRef)(e(n,t))}:function(t,o){var u=(0,r.useRef)(e(t,o)),c=(0,r.useRef)(t),a=u.current.instance;return(0,r.useEffect)((function(){c.current!==t&&(n(a,t,c.current),c.current=t)}),[a,t,o]),u}}var b=t(935);function m(e){function n(n,t){var o=e(n).current,u=o.instance,c=o.context;return(0,r.useImperativeHandle)(t,(function(){return u})),null==n.children?null:r.createElement(l,{value:c},n.children)}return(0,r.forwardRef)(n)}var g=["children"];function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach((function(n){y(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var j,w=v((function(e,n){e.children;var t=o(e,g),r=new s.Control.Layers(void 0,void 0,t);return{instance:r,context:h(h({},n),{},{layersControl:r})}}),(function(e,n,t){n.collapsed!==t.collapsed&&(!0===n.collapsed?e.collapse():e.expand())})),E=m((j=w,function(e){var n=i(),t=j(e,n),o=t.current.instance,u=(0,r.useRef)(e.position),c=e.position;return(0,r.useEffect)((function(){return o.addTo(n.map),function(){o.remove()}}),[n.map,o]),(0,r.useEffect)((function(){null!=c&&c!==u.current&&(o.setPosition(c),u.current=c)}),[o,c]),t}));function P(e){return function(n){var t=i(),o=(0,r.useRef)(n),u=c((0,r.useState)(null),2),a=u[0],s=u[1],f=t.layersControl,p=t.map,d=(0,r.useCallback)((function(n){null!=f&&(o.current.checked&&p.addLayer(n),e(f,n,o.current.name),s(n))}),[f,p]),y=(0,r.useCallback)((function(e){null==f||f.removeLayer(e),s(null)}),[f]),v=(0,r.useMemo)((function(){return h(h({},t),{},{layerContainer:{addLayer:d,removeLayer:y}})}),[t,d,y]);return(0,r.useEffect)((function(){null!==a&&o.current!==n&&(!0!==n.checked||null!=o.current.checked&&!1!==o.current.checked?!0!==o.current.checked||null!=n.checked&&!1!==n.checked||p.removeLayer(a):p.addLayer(a),o.current=n)})),n.children?r.createElement(l,{value:v},n.children):null}}function C(e,n){var t=(0,r.useRef)(n);(0,r.useEffect)((function(){n!==t.current&&null!=e.attributionControl&&(null!=t.current&&e.attributionControl.removeAttribution(t.current),null!=n&&e.attributionControl.addAttribution(n)),t.current=n}),[e,n])}function x(e,n){var t=(0,r.useRef)();(0,r.useEffect)((function(){return null!=n&&e.instance.on(n),t.current=n,function(){null!=t.current&&e.instance.off(t.current),t.current=null}}),[e,n])}function L(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?L(Object(t),!0).forEach((function(n){y(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function k(e,n){var t,r=null!==(t=e.pane)&&void 0!==t?t:n.pane;return r?S(S({},e),{},{pane:r}):e}function D(e,n){(0,r.useEffect)((function(){var t;return(null!==(t=n.layerContainer)&&void 0!==t?t:n.map).addLayer(e.instance),function(){var t;null==(t=n.layerContainer)||t.removeLayer(e.instance),n.map.removeLayer(e.instance)}}),[n,e])}function R(e){return function(n){var t=i(),r=e(k(n,t),t);return C(t.map,n.attribution),x(r.current,n.eventHandlers),D(r.current,t),r}}function I(e){return function(n){var t=i(),o=e(k(n,t),t);return x(o.current,n.eventHandlers),D(o.current,t),function(e,n){var t=(0,r.useRef)();(0,r.useEffect)((function(){if(n.pathOptions!==t.current){var r,o=null!==(r=n.pathOptions)&&void 0!==r?r:{};e.instance.setStyle(o),t.current=o}}),[e,n])}(o.current,n),o}}E.BaseLayer=P((function(e,n,t){e.addBaseLayer(n,t)})),E.Overlay=P((function(e,n,t){e.addOverlay(n,t)}));var z=["url"],_=function(e){function n(n,t){var o=e(n).current.instance;return(0,r.useImperativeHandle)(t,(function(){return o})),null}return(0,r.forwardRef)(n)}(R(v((function(e,n){var t=e.url,r=o(e,z);return{instance:new s.TileLayer(t,k(r,n)),context:n}}),(function(e,n,t){var r=n.opacity,o=n.zIndex;null!=r&&r!==t.opacity&&e.setOpacity(r),null!=o&&o!==t.zIndex&&e.setZIndex(o)})))),A=["position"];function H(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function M(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?H(Object(t),!0).forEach((function(n){y(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var B=function(e,n){return m(R(v(e,n)))}((function(e,n){var t=e.position,r=o(e,A),u=new s.Marker(t,r);return{instance:u,context:M(M({},n),{},{overlayContainer:u})}}),(function(e,n,t){n.position!==t.position&&e.setLatLng(n.position),null!=n.icon&&n.icon!==t.icon&&e.setIcon(n.icon),null!=n.zIndexOffset&&n.zIndexOffset!==t.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),null!=n.opacity&&n.opacity!==t.opacity&&e.setOpacity(n.opacity),null!=e.dragging&&n.draggable!==t.draggable&&(!0===n.draggable?e.dragging.enable():e.dragging.disable())})),N=function(e,n){var t=function(e,n){return function(t,r){var o=i(),u=e(k(t,o),o);return C(o.map,t.attribution),x(u.current,t.eventHandlers),n(u.current,o,t,r),u}}(v(e),n);return function(e){function n(n,t){var o=c((0,r.useState)(!1),2),u=o[0],a=o[1],l=e(n,a).current.instance;(0,r.useImperativeHandle)(t,(function(){return l})),(0,r.useEffect)((function(){u&&l.update()}),[l,u,n.children]);var i=l._contentNode;return i?(0,b.createPortal)(n.children,i):null}return(0,r.forwardRef)(n)}(t)}((function(e,n){return{instance:new s.Popup(e,n.overlayContainer),context:n}}),(function(e,n,t,o){var u=t.onClose,c=t.onOpen,a=t.position;(0,r.useEffect)((function(){var t=e.instance;function r(e){e.popup===t&&(t.update(),o(!0),null==c||c())}function l(e){e.popup===t&&(o(!1),null==u||u())}return n.map.on({popupopen:r,popupclose:l}),null==n.overlayContainer?(null!=a&&t.setLatLng(a),t.openOn(n.map)):n.overlayContainer.bindPopup(t),function(){var e;n.map.off({popupopen:r,popupclose:l}),null==(e=n.overlayContainer)||e.unbindPopup(),n.map.removeLayer(t)}}),[e,n,o,u,c,a])}));var T=["center","children"];function Z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Z(Object(t),!0).forEach((function(n){y(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var G=function(e,n){return m(I(v(e,n)))}((function(e,n){var t=e.center,r=(e.children,o(e,T)),u=new s.Circle(t,r);return{instance:u,context:F(F({},n),{},{overlayContainer:u})}}),(function(e,n,t){n.center!==t.center&&e.setLatLng(n.center),null!=n.radius&&n.radius!==t.radius&&e.setRadius(n.radius)})),J=[35.3608333,138.7275],U=function(e){var n=e.setCurrentPos,t=function(e){console.log(e),n(e)},o=function(){console.log="Unable to retrieve your location"};return r.createElement("button",{onClick:function(){navigator.geolocation?(console.log("Locating…"),navigator.geolocation.getCurrentPosition(t,o,{enableHighAccuracy:!0})):console.log("Geolocation is not supported by your browser")}},"GetCurrentPosition")},V=function(e){var n=e.map,t=(0,r.useState)(n.getCenter()),o=t[0],u=t[1],c=(0,r.useCallback)((function(){u(n.getCenter())}),[n]);return(0,r.useEffect)((function(){return n.on("move",c),function(){n.off("move",c)}}),[n,c]),r.createElement("p",null,"MapCenter [lat,lon]=[",o.lat.toFixed(4),",",o.lng.toFixed(4),"]")};function W(){return r.createElement("p",null,"Loading map...."," ",r.createElement("noscript",null,"You need to enable JavaScript to see this map."))}function Y(){var e=(0,r.useState)({coords:{latitude:J[0],longitude:J[1],accuracy:0}}),n=e[0],t=e[1],o=(0,r.useState)(null),u=o[0],c=o[1],a=(0,r.useState)(null),l=a[0],i=a[1];(0,r.useEffect)((function(){if(u){u.flyTo([n.coords.latitude,n.coords.longitude]);var e=new Date;e.setTime(n.timestamp),i(e)}}),[u,n]);var s=(0,r.useMemo)((function(){return r.createElement(r.Fragment,null,J[0]!==n.coords.latitude&&J[1]!==n.coords.longitude?r.createElement("p",null,"CurrentPosition [lon,lat]=[",n.coords.latitude,",",n.coords.longitude,"]"):null,0<n.coords.accuracy?r.createElement("p",null,"Accuracy = ",n.coords.accuracy.toString(),"[m]"):null,0<n.timestamp?r.createElement("p",null,"GetAt ",l.toString()):null,r.createElement(d,{center:J,zoom:13,scrollWheelZoom:!0,whenCreated:c,placeholder:r.createElement(W,null),style:{width:"90vw",height:"90vh",margin:"10px"}},r.createElement(E,{position:"topright"},r.createElement(E.BaseLayer,{checked:!0,name:"地理院地図.標準"},r.createElement(_,{attribution:'© <a href="https://maps.gsi.go.jp/development/ichiran.html">国土地理院</a>',url:"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png"})),r.createElement(E.BaseLayer,{name:"地理院地図.淡色"},r.createElement(_,{attribution:'© <a href="https://maps.gsi.go.jp/development/ichiran.html">国土地理院</a>',url:"https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png"}))),r.createElement(B,{position:[n.coords.latitude,n.coords.longitude]},r.createElement(N,null,"CurrentPosition")),0<n.coords.accuracy?r.createElement(G,{center:[n.coords.latitude,n.coords.longitude],radius:n.coords.accuracy}):null))}),[n,l]);return r.createElement("div",null,u?r.createElement(V,{map:u}):null,u?r.createElement(U,{setCurrentPos:t,disabled:!navigator.geolocation}):null,s)}}}]);
//# sourceMappingURL=component---src-pages-index-js-cae0bba33887b3c87aa0.js.map